<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:fragment="head(title)">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" />

    <!-- Pretendard -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <title th:text="${title}">Document</title>

    <style>
        body { font-family: Pretendard, sans-serif; }
    </style>
</head>

<nav th:fragment="menu(menu)" class="bg-base-200 shadow-sm">
    <div class="navbar max-w-6xl mx-auto">

        <!-- Left section -->
        <div class="flex-none lg:hidden">
            <label for="drawer-nav" class="btn btn-ghost">
                <i data-lucide="menu"></i>
            </label>
        </div>

        <div class="flex-1">
            <a th:href="@{/}" class="text-xl font-semibold">Anthive</a>
        </div>

        <!-- Right section -->
        <div class="flex-none hidden lg:flex">
            <ul class="menu menu-horizontal px-1">

                <li th:classappend="${menu}=='home' ? 'bordered'">
                    <a th:href="@{/}">홈</a>
                </li>

                <li th:classappend="${menu}=='blog' ? 'bordered'">
                    <a th:href="@{/anthive/{account}/catalog-list(account=${#authentication.name})}">
                        내 블로그
                    </a>
                </li>
            </ul>
        </div>

        <!-- Auth buttons -->
        <div class="flex-none ml-4">

            <!-- 로그인 전 -->
            <div sec:authorize="!isAuthenticated()">
                <a th:href="@{/account/login}" class="btn btn-sm btn-outline mr-2">로그인</a>
                <a th:href="@{/account/register}" class="btn btn-sm btn-primary">회원가입</a>
            </div>

            <!-- 로그인 후 -->
            <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post">
                <div class="flex items-center gap-4">
                    <span class="text-sm"
                          sec:authentication="name">사용자</span>
                    <button class="btn btn-sm btn-error text-white">
                        로그아웃
                    </button>
                </div>
            </form>

        </div>
    </div>

    <!-- Drawer for mobile -->
    <input id="drawer-nav" type="checkbox" class="drawer-toggle" />

    <div class="drawer-side z-50">
        <label for="drawer-nav" class="drawer-overlay"></label>
        <ul class="menu p-4 w-80 bg-base-100 text-base-content">

            <li th:classappend="${menu}=='home' ? 'active'">
                <a th:href="@{/}">
                    <i data-lucide="home"></i>
                    홈
                </a>
            </li>

            <li th:classappend="${menu}=='blog' ? 'active'">
                <a th:href="@{/anthive/{account}/catalog-list(account=${#authentication.name})}">
                    <i data-lucide="book-text"></i>
                    내 블로그
                </a>
            </li>

        </ul>
    </div>

    <script>
        lucide.createIcons();
    </script>
</nav>

<body>
</body>
</html>
